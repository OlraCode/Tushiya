<link rel="stylesheet" href="{{ asset('css/header.css') }}">

<nav class="navbar navbar-expand-lg bg-body-tertiary" >
  <div class="container-fluid mx-2">

    <a class="navbar-brand me-3" href="/">
        <img src="{{ asset('img/tushiya.png') }}" alt="Tushiya" style="width: 120px">
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">

      <ul class="navbar-nav mb-2 mb-lg-0">

        <li class="nav-item">
          <a class="nav-link btn me-2" aria-current="page" href="{{ path('app_course_index') }}">Explorar</a>
        </li>

        <li class="nav-item">
          <form class="d-flex" role="search">
            <input class="form-control me-2" type="search" placeholder="Busque algum curso" aria-label="Search" style="width: 500px"/>
            <button class="btn me-3 rounded-circle p-2 border search" type="submit"><img src="{{ asset('img/search.png') }}" alt="Buscar" style="width: 25px"></button>
          </form>
        </li>
      </ul>

      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">

        {% if is_granted('ROLE_USER') %}
          <li class="nav-item">
            <a href="{{ path('app_cart') }}" class="position-relative">
              <img src="{{ asset('img/cart.png') }}" alt="Carrinho" style="width: 36px">
              {% set cartQty = app.user.getCartItems.count %}
              {% if cartQty > 0 %}
                <span class="position-absolute top-1 start-100 translate-middle badge rounded-pill bg-danger">
                  {{ cartQty }}
                  <span class="visually-hidden">Carrinho</span>
                </span>
              {% endif %}
            </a>
          </li>
        {% endif %}
        
        {% if is_granted('ROLE_USER') %}
            <li class="nav-item dropdown ms-3">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Minha conta
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" href="#">Meus cursos</a></li>
                    {% if is_granted('ROLE_TEACHER') %}
                      <a href="{{ path('app_sent_courses') }}" class="dropdown-item">Cursos enviados</a>
                    {% endif %}
                    <li><a class="dropdown-item" href="{{ path('app_perfil') }}">Meu perfil</a></li>
                    <li><a class="dropdown-item" href="{{ path('app_logout') }}">Sair</a></li>
                </ul>
            </li>

        {% else %}

            <li class="nav-item ms-3">
            <a class="btn btn-outline-primary" href="{{ path('app_login') }}">Login</a>
            </li>

            <li class="nav-item ms-2">
            <a class="btn btn-primary" href="{{ path('app_register') }}">Registro</a>
            </li>

        {% endif %}
      </ul>
      
    </div>
  </div>
</nav>