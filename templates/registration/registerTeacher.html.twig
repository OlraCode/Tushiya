{% extends 'base.html.twig' %}


{% block title %}Register{% endblock %}

{% block body %}

    <link rel="stylesheet" href={{asset('css/cad.css')}}>

    {% for flash_error in app.flashes('verify_email_error') %}
        <div class="alert alert-danger" role="alert">{{ flash_error }}</div>
    {% endfor %}
    
    <div class="form-container">
        <main>
        <h1 class="prof" >Professor</h1>

        <div>
            {{ form_errors(registrationForm) }}
            {{ form_start(registrationForm) }}
                {{ form_row(registrationForm.name) }}
                {{ form_row(registrationForm.cpf) }}
                {{ form_row(registrationForm.subject) }}
                {{ form_row(registrationForm.description) }}
                {{ form_row(registrationForm.email) }}
                {{ form_row(registrationForm.plainPassword) }}
                {{ form_row(registrationForm.agreeTerms, {label: 'Aceito os <a href="/terms" target="_blank">Termos</a>'}) }}
                <button type="submit" class="btn btn-success mb-1">Cadastrar</button>
            
            {{ form_end(registrationForm) }}
        </div>

        <a href="{{ path('app_register') }}" class="alternative-link">Cadastro como aluno</a>
        </main>

    </div>

    <script>
        document.getElementById('{{ registrationForm.cpf.vars.id }}').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, ''); // remove qualquer coisa que não seja número

            if (value.length > 11) {
                value = value.substring(0, 11); // limita a 11 dígitos
            }

            // Máscara: 000.000.000-00
            if (value.length > 9) {
                e.target.value = value.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
            }
            else if (value.length > 6) {
                e.target.value = value.replace(/(\d{3})(\d{3})(\d{1,3})/, "$1.$2.$3");
            }
            else if (value.length > 3) {
                e.target.value = value.replace(/(\d{3})(\d{1,3})/, "$1.$2");
            }
            else {
                e.target.value = value;
            }
        });
    </script>
{% endblock %}
